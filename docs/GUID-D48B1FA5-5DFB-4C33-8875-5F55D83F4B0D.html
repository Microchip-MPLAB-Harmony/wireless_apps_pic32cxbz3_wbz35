<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" data-whc_version="24.1">
    <head><link rel="shortcut icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><link rel="icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="Getting Started Getting Started with Peripheral Building Blocks Introduction This document will help users to enable &#34;Deep sleep&#34; mode with BLE Advertisements on WBZ351 Curiosity board using MPLAB ..."/><meta name="copyright" content="(C) Copyright 2023"/><meta name="generator" content="DITA-OT"/><title>5.1.2.4 BLE Deep Sleep Advertising</title><!--  Generated with Oxygen version 24.1, build number 2022062014.  --><meta name="wh-path2root" content=""/><meta name="wh-toc-id" content="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D-d5686e274"/><meta name="wh-source-relpath" content="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D.xml"/><meta name="wh-out-relpath" content="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D.html"/>
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css"/>
    
    <link rel="stylesheet" href="./oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css"/>
    
    <!-- Template default styles  -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/app/topic-page.css?buildId=2022062014"/>
    
    
    <script src="./oxygen-webhelp/lib/jquery/jquery-3.5.1.min.js"></script>
    
    <script data-main="./oxygen-webhelp/app/topic-page.js" src="./oxygen-webhelp/lib/requirejs/require.js"></script>
<link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/microchip.css?buildId=2022062014"/><link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/notes.css?buildId=2022062014"/>
<script src="mchp-context-help.js"></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async="" type="text/javascript"></script>
    <script src="https://assets.adobedtm.com/6a72a357eb48/a636c708c7fe/launch-0b0023397020.min.js"></script><!-- Adobe Analytics -->
</head>

    <body id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            Jump to main content
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="index.html" class=" wh_logo d-none d-sm-block "><img src="oxygen-webhelp\template\resources/images/microchip.png" alt="PIC32CXBZ3/WBZ35 Application Developer's Guide "/></a>
                    <div class=" wh_publication_title "><a href="index.html">PIC32CXBZ3/WBZ35 Application Developer's Guide </a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        </div>
    </div>
</header>
        
        
         
        
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="search.html"><div class="d-flex justify-contents-around"><div class="flex-grow-1"></div><div class="position-relative flex-grow-1"><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required"/><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div><div class="align-self-center flex-grow-1 ml-2"></div></div></form>
            
            <div class="mchp-color-stripe-grid-container">
  <div class="mchp-main-bar mchp-orange-bar"></div>
  <div class="mchp-main-bar mchp-blue-bar"></div>
  <div class="mchp-main-bar mchp-green-bar"></div>
</div>
            
        </div>
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="index.html"><span>Home</span></a></span></li><li><div class="topicref" data-id="GUID-3CC3561E-252E-43B9-BC8A-47DD108A0A46"><div class="title"><a href="GUID-3CC3561E-252E-43B9-BC8A-47DD108A0A46.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5</ph>
Bluetooth Low Energy Applications</a><div class="wh-tooltip"><p class="shortdesc">This section provides details on documentation describing the steps to test and develop         the precompiled BLE application examples. </p></div></div></div></li><li><div class="topicref" data-id="GUID-17DABF04-E5D8-4201-A746-2FC244450A19"><div class="title"><a href="GUID-17DABF04-E5D8-4201-A746-2FC244450A19.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1</ph>
Building Block Examples</a></div></div></li><li><div class="topicref" data-id="GUID-B3B46369-F5B4-401B-8405-658BE34988F4"><div class="title"><a href="GUID-B3B46369-F5B4-401B-8405-658BE34988F4.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2</ph>
Peripheral</a></div></div></li><li class="active"><div class="topicref" data-id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D"><div class="title"><a href="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.4</ph>
BLE Deep Sleep Advertising</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="GUID-2BA8F9EF-B20D-4990-807C-9539A6649405-d5686e9" class="topicref" data-id="GUID-2BA8F9EF-B20D-4990-807C-9539A6649405" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-2BA8F9EF-B20D-4990-807C-9539A6649405.html" id="GUID-2BA8F9EF-B20D-4990-807C-9539A6649405-d5686e9-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
Introduction</a></div></div></li><li role="treeitem"><div data-tocid="GUID-6E4F1988-BD50-45F2-8FC4-25CE37237D98-d5686e17" class="topicref" data-id="GUID-6E4F1988-BD50-45F2-8FC4-25CE37237D98" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-6E4F1988-BD50-45F2-8FC4-25CE37237D98.html" id="GUID-6E4F1988-BD50-45F2-8FC4-25CE37237D98-d5686e17-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">2</ph>
Secure Boot and Signature Header Generation</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-2D7173E3-38FE-4053-B2BB-49C7EB3192C2-d5686e25" class="topicref" data-id="GUID-2D7173E3-38FE-4053-B2BB-49C7EB3192C2" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-2D7173E3-38FE-4053-B2BB-49C7EB3192C2-d5686e25-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-2D7173E3-38FE-4053-B2BB-49C7EB3192C2.html" id="GUID-2D7173E3-38FE-4053-B2BB-49C7EB3192C2-d5686e25-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">3</ph>
Getting Started with WBZ351 Curiosity Board</a><div class="wh-tooltip"><p class="shortdesc">This section covers evaluation board features and running the preprogrammed demo example</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-2AD37FE2-1915-4E34-9A05-79E3810726D7-d5686e71" class="topicref" data-id="GUID-2AD37FE2-1915-4E34-9A05-79E3810726D7" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-2AD37FE2-1915-4E34-9A05-79E3810726D7-d5686e71-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-2AD37FE2-1915-4E34-9A05-79E3810726D7.html" id="GUID-2AD37FE2-1915-4E34-9A05-79E3810726D7-d5686e71-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">4</ph>
Getting Started with Software Development</a><div class="wh-tooltip"><p class="shortdesc">This section gives a detailed information on the steps to install IDE, compiler, tool         chain, BLE, Zigbee stacks and application examples on the PC. </p></div></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="GUID-3CC3561E-252E-43B9-BC8A-47DD108A0A46-d5686e155" class="topicref" data-id="GUID-3CC3561E-252E-43B9-BC8A-47DD108A0A46" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action GUID-3CC3561E-252E-43B9-BC8A-47DD108A0A46-d5686e155-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-3CC3561E-252E-43B9-BC8A-47DD108A0A46.html" id="GUID-3CC3561E-252E-43B9-BC8A-47DD108A0A46-d5686e155-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5</ph>
Bluetooth Low Energy Applications</a><div class="wh-tooltip"><p class="shortdesc">This section provides details on documentation describing the steps to test and develop         the precompiled BLE application examples. </p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="true"><div data-tocid="GUID-17DABF04-E5D8-4201-A746-2FC244450A19-d5686e166" class="topicref" data-id="GUID-17DABF04-E5D8-4201-A746-2FC244450A19" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action GUID-17DABF04-E5D8-4201-A746-2FC244450A19-d5686e166-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-17DABF04-E5D8-4201-A746-2FC244450A19.html" id="GUID-17DABF04-E5D8-4201-A746-2FC244450A19-d5686e166-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1</ph>
Building Block Examples</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-E8C0DDA5-3AD0-42A4-B4EF-BCB02811BF8C-d5686e174" class="topicref" data-id="GUID-E8C0DDA5-3AD0-42A4-B4EF-BCB02811BF8C" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-E8C0DDA5-3AD0-42A4-B4EF-BCB02811BF8C-d5686e174-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-E8C0DDA5-3AD0-42A4-B4EF-BCB02811BF8C.html" id="GUID-E8C0DDA5-3AD0-42A4-B4EF-BCB02811BF8C-d5686e174-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.1</ph>
Central</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="GUID-B3B46369-F5B4-401B-8405-658BE34988F4-d5686e240" class="topicref" data-id="GUID-B3B46369-F5B4-401B-8405-658BE34988F4" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action GUID-B3B46369-F5B4-401B-8405-658BE34988F4-d5686e240-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-B3B46369-F5B4-401B-8405-658BE34988F4.html" id="GUID-B3B46369-F5B4-401B-8405-658BE34988F4-d5686e240-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2</ph>
Peripheral</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="GUID-AB1A02BF-4F9B-4058-90D9-02BFB3136682-d5686e248" class="topicref" data-id="GUID-AB1A02BF-4F9B-4058-90D9-02BFB3136682" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-AB1A02BF-4F9B-4058-90D9-02BFB3136682.html" id="GUID-AB1A02BF-4F9B-4058-90D9-02BFB3136682-d5686e248-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.1</ph>
  <strong class="ph b">Peripheral - FreeRTOS BLE Stack and App Initialize</strong></a></div></div></li><li role="treeitem"><div data-tocid="GUID-820CEA03-90AE-484F-87C9-9CF2CE652702-d5686e258" class="topicref" data-id="GUID-820CEA03-90AE-484F-87C9-9CF2CE652702" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-820CEA03-90AE-484F-87C9-9CF2CE652702.html" id="GUID-820CEA03-90AE-484F-87C9-9CF2CE652702-d5686e258-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.2</ph>
BLE Legacy Advertisements</a></div></div></li><li role="treeitem"><div data-tocid="GUID-9A3C4C97-E09F-4FF9-878C-3873892445F4-d5686e266" class="topicref" data-id="GUID-9A3C4C97-E09F-4FF9-878C-3873892445F4" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-9A3C4C97-E09F-4FF9-878C-3873892445F4.html" id="GUID-9A3C4C97-E09F-4FF9-878C-3873892445F4-d5686e266-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.3</ph>
BLE Extended Advertisements</a></div></div></li><li role="treeitem" class="active"><div data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D-d5686e274" class="topicref" data-id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D.html" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D-d5686e274-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.4</ph>
BLE Deep Sleep Advertising</a></div></div></li><li role="treeitem"><div data-tocid="GUID-F9A0C390-C124-49A7-9F22-157D20BFBE5D-d5686e282" class="topicref" data-id="GUID-F9A0C390-C124-49A7-9F22-157D20BFBE5D" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-F9A0C390-C124-49A7-9F22-157D20BFBE5D.html" id="GUID-F9A0C390-C124-49A7-9F22-157D20BFBE5D-d5686e282-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.5</ph>
BLE Connection</a></div></div></li><li role="treeitem"><div data-tocid="GUID-D445026D-A73D-4603-9007-92C7C59238FC-d5686e290" class="topicref" data-id="GUID-D445026D-A73D-4603-9007-92C7C59238FC" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-D445026D-A73D-4603-9007-92C7C59238FC.html" id="GUID-D445026D-A73D-4603-9007-92C7C59238FC-d5686e290-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.6</ph>
BLE Transparent UART with External Flash OTA</a></div></div></li><li role="treeitem"><div data-tocid="GUID-0F3193BF-C61D-4DDB-9E98-7F0A444269A8-d5686e298" class="topicref" data-id="GUID-0F3193BF-C61D-4DDB-9E98-7F0A444269A8" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-0F3193BF-C61D-4DDB-9E98-7F0A444269A8.html" id="GUID-0F3193BF-C61D-4DDB-9E98-7F0A444269A8-d5686e298-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.7</ph>
BLE Custom service</a></div></div></li><li role="treeitem"><div data-tocid="GUID-50CDA49F-936D-4722-80BB-2DD7BDDD9B00-d5686e306" class="topicref" data-id="GUID-50CDA49F-936D-4722-80BB-2DD7BDDD9B00" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-50CDA49F-936D-4722-80BB-2DD7BDDD9B00.html" id="GUID-50CDA49F-936D-4722-80BB-2DD7BDDD9B00-d5686e306-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.8</ph>
BLE Transparent UART Peripheral with LE Coded Phy</a></div></div></li><li role="treeitem"><div data-tocid="GUID-89AA2FEC-7B43-4ACA-8796-F9874F650839-d5686e314" class="topicref" data-id="GUID-89AA2FEC-7B43-4ACA-8796-F9874F650839" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-89AA2FEC-7B43-4ACA-8796-F9874F650839.html" id="GUID-89AA2FEC-7B43-4ACA-8796-F9874F650839-d5686e314-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.9</ph>
BLE Multiple Advertising Sets</a></div></div></li><li role="treeitem"><div data-tocid="GUID-02FE54CD-CC0E-45F0-8525-0043B54B828B-d5686e322" class="topicref" data-id="GUID-02FE54CD-CC0E-45F0-8525-0043B54B828B" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-02FE54CD-CC0E-45F0-8525-0043B54B828B.html" id="GUID-02FE54CD-CC0E-45F0-8525-0043B54B828B-d5686e322-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.2.10</ph>
Path Loss Feature in Legacy Advertisements</a></div></div></li></ul></li><li role="treeitem"><div data-tocid="GUID-59D44A45-F1F0-46AF-A611-9720C8CE7E93-d5686e330" class="topicref" data-id="GUID-59D44A45-F1F0-46AF-A611-9720C8CE7E93" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-59D44A45-F1F0-46AF-A611-9720C8CE7E93.html" id="GUID-59D44A45-F1F0-46AF-A611-9720C8CE7E93-d5686e330-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.3</ph>
BLE Multirole Multilink Transparent UART </a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-CB26EBC2-7D3B-454B-98D1-C29A3223ADE6-d5686e338" class="topicref" data-id="GUID-CB26EBC2-7D3B-454B-98D1-C29A3223ADE6" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-CB26EBC2-7D3B-454B-98D1-C29A3223ADE6-d5686e338-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-CB26EBC2-7D3B-454B-98D1-C29A3223ADE6.html" id="GUID-CB26EBC2-7D3B-454B-98D1-C29A3223ADE6-d5686e338-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.1.4</ph>
Chip Peripherals</a><div class="wh-tooltip"><p class="shortdesc">This section describes Application examples that showcase BLE Stack Initialization and         Chip Peripheral running. </p></div></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-92137358-930E-4654-9431-E8BA0E260468-d5686e357" class="topicref" data-id="GUID-92137358-930E-4654-9431-E8BA0E260468" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-92137358-930E-4654-9431-E8BA0E260468-d5686e357-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-92137358-930E-4654-9431-E8BA0E260468.html" id="GUID-92137358-930E-4654-9431-E8BA0E260468-d5686e357-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.2</ph>
Advanced Applications</a></div></div></li><li role="treeitem"><div data-tocid="GUID-71834715-4833-43ED-A1ED-A2A72DDE48BC-d5686e436" class="topicref" data-id="GUID-71834715-4833-43ED-A1ED-A2A72DDE48BC" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-71834715-4833-43ED-A1ED-A2A72DDE48BC.html" id="GUID-71834715-4833-43ED-A1ED-A2A72DDE48BC-d5686e436-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">5.3</ph>
BLE Virtual Sniffer</a></div></div></li></ul></li><li role="treeitem"><div data-tocid="GUID-29D584B4-2DB5-4161-B8E2-E5528BE98008-d5686e444" class="topicref" data-id="GUID-29D584B4-2DB5-4161-B8E2-E5528BE98008" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-29D584B4-2DB5-4161-B8E2-E5528BE98008.html" id="GUID-29D584B4-2DB5-4161-B8E2-E5528BE98008-d5686e444-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">6</ph>
<span class="ph">PIC32CXBZ3/WBZ35</span> Three-Wire PTA Coexistence Design</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-668A6CB2-F1FB-438D-9E1E-D67AC3C1C132-d5686e454" class="topicref" data-id="GUID-668A6CB2-F1FB-438D-9E1E-D67AC3C1C132" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-668A6CB2-F1FB-438D-9E1E-D67AC3C1C132-d5686e454-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-668A6CB2-F1FB-438D-9E1E-D67AC3C1C132.html" id="GUID-668A6CB2-F1FB-438D-9E1E-D67AC3C1C132-d5686e454-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">7</ph>
Getting Started with Zigbee Applications</a></div></div></li><li role="treeitem"><div data-tocid="GUID-64131DE4-2C60-4116-A206-EF72A41E71CE-d5686e618" class="topicref" data-id="GUID-64131DE4-2C60-4116-A206-EF72A41E71CE" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-64131DE4-2C60-4116-A206-EF72A41E71CE.html" id="GUID-64131DE4-2C60-4116-A206-EF72A41E71CE-d5686e618-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">8</ph>
Flashing hex from MPLAB DISCOVER using MPLAB IPE</a><div class="wh-tooltip"><p class="shortdesc">This section provides a detailed procedure of how to download an already existing     application hex file from MPLAB DISCOVER and flash the hex file into <span class="ph">WBZ351</span> Curiosity Board using MPLAB IPE.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-B9333775-2F34-4B60-9429-E1B1B7F505FD-d5686e632" class="topicref" data-id="GUID-B9333775-2F34-4B60-9429-E1B1B7F505FD" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-B9333775-2F34-4B60-9429-E1B1B7F505FD-d5686e632-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-B9333775-2F34-4B60-9429-E1B1B7F505FD.html" id="GUID-B9333775-2F34-4B60-9429-E1B1B7F505FD-d5686e632-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">9</ph>
Adding Chip Peripherals</a><div class="wh-tooltip"><p class="shortdesc">This section describes how to add analog/digital peripherals to the                                         application</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-F9A40E74-7127-4C2C-B480-2746007AAEAE-d5686e654" class="topicref" data-id="GUID-F9A40E74-7127-4C2C-B480-2746007AAEAE" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-F9A40E74-7127-4C2C-B480-2746007AAEAE-d5686e654-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-F9A40E74-7127-4C2C-B480-2746007AAEAE.html" id="GUID-F9A40E74-7127-4C2C-B480-2746007AAEAE-d5686e654-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">10</ph>
Low Power Design</a><div class="wh-tooltip"><p class="shortdesc">This section explains in detail on how to enable the low power modes –             <span class="ph instanceOffsets">Sleep/Standby or Deep Sleep/Backup modes in the             design.</span></p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-D7A53CEA-74B4-4CAA-A5D4-F69980188D1B-d5686e686" class="topicref" data-id="GUID-D7A53CEA-74B4-4CAA-A5D4-F69980188D1B" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-D7A53CEA-74B4-4CAA-A5D4-F69980188D1B-d5686e686-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-D7A53CEA-74B4-4CAA-A5D4-F69980188D1B.html" id="GUID-D7A53CEA-74B4-4CAA-A5D4-F69980188D1B-d5686e686-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">11</ph>
Firmware and OTA Updates</a><div class="wh-tooltip"><p class="shortdesc">This section documents how to enable firmware updates in the design, whether it is serial         or Over The Air (OTA)</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-118CCD5A-8F9C-4CF7-9DF4-55142B37F55C-d5686e1085" class="topicref" data-id="GUID-118CCD5A-8F9C-4CF7-9DF4-55142B37F55C" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-118CCD5A-8F9C-4CF7-9DF4-55142B37F55C-d5686e1085-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-118CCD5A-8F9C-4CF7-9DF4-55142B37F55C.html" id="GUID-118CCD5A-8F9C-4CF7-9DF4-55142B37F55C-d5686e1085-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">12</ph>
Wireless System and Board Support Services</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-5FC6D5A2-B8C3-4AD8-AC31-0AABE237A2F7-d5686e1229" class="topicref" data-id="GUID-5FC6D5A2-B8C3-4AD8-AC31-0AABE237A2F7" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-5FC6D5A2-B8C3-4AD8-AC31-0AABE237A2F7-d5686e1229-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-5FC6D5A2-B8C3-4AD8-AC31-0AABE237A2F7.html" id="GUID-5FC6D5A2-B8C3-4AD8-AC31-0AABE237A2F7-d5686e1229-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">13</ph>
Support Documentation</a><div class="wh-tooltip"><p class="shortdesc">This section has documentation that is generic and used as supporting document with the         application example documentation. </p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-BC1FFF03-D50C-427E-84AE-A0447A831226-d5686e1266" class="topicref" data-id="GUID-BC1FFF03-D50C-427E-84AE-A0447A831226" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-BC1FFF03-D50C-427E-84AE-A0447A831226-d5686e1266-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-BC1FFF03-D50C-427E-84AE-A0447A831226.html" id="GUID-BC1FFF03-D50C-427E-84AE-A0447A831226-d5686e1266-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">14</ph>
SW API Guide</a><div class="wh-tooltip"><p class="shortdesc">Enter a short description of your topic here (optional).</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d5686e7515" class="topicref backmatter backmatter_parent" data-id="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d5686e7515-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B_2.html" id="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d5686e7515-link">Microchip Information</a></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-2063798D-0C60-4BD2-B8DE-96FFA46017C0"><h1 class="- topic/title title topictitle1" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-2063798D-0C60-4BD2-B8DE-96FFA46017C0" style="">5.1.2.4 BLE Deep Sleep Advertising</h1>
    <div class="- topic/body body"><p class="- topic/p p"> <a class="- topic/xref xref" href="GUID-17DABF04-E5D8-4201-A746-2FC244450A19.html">Getting Started</a></p><p class="- topic/p p"> <a class="- topic/xref xref" href="GUID-B3B46369-F5B4-401B-8405-658BE34988F4.html">Getting Started with Peripheral Building Blocks</a></p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><a class="- topic/xref xref" href=""></a></strong></p><p class="- topic/p p"></p><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-E5A5126A-BEC8-4541-9415-F6005C391E89" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-E5A5126A-BEC8-4541-9415-F6005C391E89"><h2 class="- topic/title title sectiontitle">Introduction</h2><p class="- topic/p p">This document will help users to enable "Deep sleep" mode with BLE Advertisements on <span class="- topic/ph ph">WBZ351</span> Curiosity board using MPLAB Code Configurator(MCC).
                In this basic application example the Deep Sleep advertisement interval will be set
                to 1000 millisecond. The advertisement interval will dictate the application Deep
                sleep time.</p><p class="- topic/p p">Users of this document can choose to just run the precompiled Application Example hex file on the <span class="- topic/ph ph">WBZ351</span> Curiosity Board and experience the demo or can go through the steps involved in developing this Application from scratch.</p><p class="- topic/p p">These examples each build on top on one and other. We strongly recommend that you follow the examples in order, to learn the basics concepts before progressing to the more advanced topics.</p></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F90C9AF2-9298-4F77-908D-493BCF52E866" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F90C9AF2-9298-4F77-908D-493BCF52E866"><h2 class="- topic/title title sectiontitle">Recommended Reads</h2><div class="- topic/p p"><ol class="- topic/ol ol" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0FDC7D3C-A2C7-4E26-8B55-6DED37A0837B" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0FDC7D3C-A2C7-4E26-8B55-6DED37A0837B"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F4E594AF-3505-4731-B020-7CC914D9F770" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F4E594AF-3505-4731-B020-7CC914D9F770"><p class="- topic/p p"><a class="- topic/xref xref" href="https://onlinedocs.microchip.com/pr/GUID-C5EAF60E-9124-427C-A0F1-F2DBE662EA92-en-US-1/index.html?GUID-222749FE-01C5-43B6-A5C7-CD82B3FC7F5F" target="_blank" rel="external noopener">BLE Software Specification</a></p></li><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F4E594AF-3505-4731-B020-7CC914D9F770" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F4E594AF-3505-4731-B020-7CC914D9F770"><a class="- topic/xref xref" href="GUID-AB1A02BF-4F9B-4058-90D9-02BFB3136682.html">FreeRtos BLE App Initialize</a></li><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-08004E28-D962-4C38-8922-0966276D8552" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-08004E28-D962-4C38-8922-0966276D8552"><a class="- topic/xref xref" href="GUID-994B6462-D0F1-4B8C-A97B-A9CBF20426C2.html">Low Power Notes</a><p class="- topic/p p"></p></li></ol></div></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-7EA51B0D-8E4A-4555-BD4B-0D1B90A07BB1" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-7EA51B0D-8E4A-4555-BD4B-0D1B90A07BB1"><h2 class="- topic/title title sectiontitle">Hardware Required</h2><div class="- topic/p p"><div class="table-container"><table class="- topic/table table frame-all" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F6D6776C-7CE6-49ED-B33B-2B18BF03B4F6" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F6D6776C-7CE6-49ED-B33B-2B18BF03B4F6" data-cols="2"><caption class="- topic/title title tablecap" data-caption-side="top" data-is-repeated="true"><span class="table--title-label"><span class="table--title-label">Table 5-1. </span></span><span class="table--title" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-CA7D474F-4070-45DC-AA5A-DDA84E7444BD"></span></caption><colgroup><col style="width:50%"/><col style="width:50%"/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-1 rowsep-1" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F6D6776C-7CE6-49ED-B33B-2B18BF03B4F6__entry__1">Tool</th><th class="- topic/entry entry colsep-0 rowsep-1" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F6D6776C-7CE6-49ED-B33B-2B18BF03B4F6__entry__2">Qty</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-1 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F6D6776C-7CE6-49ED-B33B-2B18BF03B4F6__entry__1"><span class="- topic/ph ph">WBZ351</span> Curiosity Board</td><td class="- topic/entry entry colsep-0 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F6D6776C-7CE6-49ED-B33B-2B18BF03B4F6__entry__2">1</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-1 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F6D6776C-7CE6-49ED-B33B-2B18BF03B4F6__entry__1">Micro USB cable</td><td class="- topic/entry entry colsep-0 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F6D6776C-7CE6-49ED-B33B-2B18BF03B4F6__entry__2">1</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-1 rowsep-0" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F6D6776C-7CE6-49ED-B33B-2B18BF03B4F6__entry__1"><a class="- topic/xref xref" href="https://www.microchip.com/en-us/development-tool/ATPOWERDEBUGGER" target="_blank" rel="external noopener">Power Debugger</a>/Multimeter</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F6D6776C-7CE6-49ED-B33B-2B18BF03B4F6__entry__2">1</td></tr></tbody></table></div></div><p class="- topic/p p"></p></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-21D0FA9A-083B-41A6-8D3F-BE24E852031A" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-21D0FA9A-083B-41A6-8D3F-BE24E852031A"><h2 class="- topic/title title sectiontitle">SDK Setup</h2><div class="- topic/p p"><ol class="- topic/ol ol" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-949EBFC3-9B6F-4ECA-81D5-697770A33391" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-949EBFC3-9B6F-4ECA-81D5-697770A33391"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-D9769041-9371-410D-ACE1-60CE6935B3AA" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-D9769041-9371-410D-ACE1-60CE6935B3AA"><p class="- topic/p p"><a class="- topic/xref xref" href="GUID-2AD37FE2-1915-4E34-9A05-79E3810726D7.html" title="This section gives a detailed information on the steps to install IDE, compiler, tool chain, BLE, Zigbee stacks and application examples on the PC.">Getting Started with Software Development</a></p><p class="- topic/p p"></p></li></ol></div></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-C2836D07-01B1-49EF-AAC2-CE48326BC119" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-C2836D07-01B1-49EF-AAC2-CE48326BC119"><h2 class="- topic/title title sectiontitle">Software</h2><div class="- topic/p p"><ol class="- topic/ol ol" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3D55523A-68C6-4AFB-92B8-A0254DE87FA8" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3D55523A-68C6-4AFB-92B8-A0254DE87FA8"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6E8CE911-B215-4859-8547-D0E9DC32E3B3" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6E8CE911-B215-4859-8547-D0E9DC32E3B3"><p class="- topic/p p"> <a class="- topic/xref xref" href="https://ttssh2.osdn.jp/index.html.en" target="_blank" rel="external noopener">TeraTerm</a></p><p class="- topic/p p"></p></li></ol></div></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6BE272DC-6424-4165-B344-CBF5ECDA37D7" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6BE272DC-6424-4165-B344-CBF5ECDA37D7"><h2 class="- topic/title title sectiontitle">Smartphone App</h2><div class="- topic/p p"><ol class="- topic/ol ol" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-D0E22E80-27E9-4CD4-817B-0AA74AC5FCAB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-D0E22E80-27E9-4CD4-817B-0AA74AC5FCAB"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-68DAA3DD-7158-4AF9-8991-C2AF11D8E7F7" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-68DAA3DD-7158-4AF9-8991-C2AF11D8E7F7"><p class="- topic/p p">Microchip Bluetooth Data</p><p class="- topic/p p"></p></li></ol></div></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-223374A9-C495-4FB3-B331-1874CE132816" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-223374A9-C495-4FB3-B331-1874CE132816"><h2 class="- topic/title title sectiontitle">Programming the precompiled hex file or Application Example</h2><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Programming the hex file using MPLABX IPE</strong></p><ol class="- topic/ol ol" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-86DFBE12-A651-42BA-B28A-3BBE8A45957A" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-86DFBE12-A651-42BA-B28A-3BBE8A45957A"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-615EAAB4-CA37-48DC-B8D6-A517E037C6B2" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-615EAAB4-CA37-48DC-B8D6-A517E037C6B2"><p class="- topic/p p">Precompiled Hex file is located in "&lt;Harmony Content
                        Path&gt;\wireless_apps_pic32cxbz3_wbz35\apps\ble\building_blocks\peripheral\deep_sleep_adv\hex"
                        folder</p></li><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-32A5BDB1-E7AC-43F3-8DE0-1C2A0C6B2BA4" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-32A5BDB1-E7AC-43F3-8DE0-1C2A0C6B2BA4"><p class="- topic/p p">Follow the steps mentioned <a class="- topic/xref xref" href="https://microchipdeveloper.com/ipe:programming-device" target="_blank" rel="external noopener">here</a></p></li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Caution:</strong> Users should choose the correct Device and Tool information</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Programming the Application using MPLABX IDE</strong></p><ol class="- topic/ol ol" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-38E32D75-4A7E-4FCA-AB19-EAC72582B498" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-38E32D75-4A7E-4FCA-AB19-EAC72582B498"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-33A1AC6E-81BD-4873-9C21-CC3BF516AAC9" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-33A1AC6E-81BD-4873-9C21-CC3BF516AAC9"><p class="- topic/p p">Follow steps mentioned in of <a class="- topic/xref xref" href="GUID-EA74172C-595E-4A34-B359-D42EE443F0EC.html" title="This section gives a detail explanation on how to open, build and program an existing application example.">Running a Precompiled Example</a> document</p></li><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-87FDAD2C-721F-4193-A9F9-C5DFD00D8841" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-87FDAD2C-721F-4193-A9F9-C5DFD00D8841"><p class="- topic/p p">Open and program the Application Example "ble_deep_sleep_adv.x" located in "&lt;Harmony Content
                        Path&gt;\wireless_apps_pic32cxbz3_wbz35\apps\ble\building_blocks\peripheral\deep_sleep_adv\firmware"
                        using MPLABX IDE</p></li></ol><p class="- topic/p p"><dfn class="- topic/term term">&lt;Harmony Content Path&gt;</dfn> <a class="- topic/xref xref" href="GUID-A55E9342-CE44-4A91-86BB-FEC6706FCD1C.html#GUID-A55E9342-CE44-4A91-86BB-FEC6706FCD1C__GUID-C6B23D06-5DF8-4D73-B997-AC22020FE9D3">how to find what is my Harmony Content Path</a></p><p class="- topic/p p"></p></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-7AEB4551-8490-4AF3-AAD0-B605BC8A1DD8" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-7AEB4551-8490-4AF3-AAD0-B605BC8A1DD8"><h2 class="- topic/title title sectiontitle">Demo Description</h2><p class="- topic/p p">This Application Example enables users to enter Deep sleep mode while transmitting Connectable,
                Undirected BLE Advertisements. On power on reset application will enter "Deep Sleep
                Mode". When the USR-BTN 2(SW2) is pressed, the device on-board LED(green) starts
                blinking to denote start of advertisements. The device will enter into Deep sleep
                mode periodically based on the advertisement interval. The advertisement interval is
                set to 1000 milliseconds for this example. When device connects with the mobile App
                the onboard led start to glow solid, which indicates the connection established and
                the device will enter Standby Sleep Mode during Idle state.</p><p class="- topic/p p"></p></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-137E096D-51A6-4909-A4B9-DB6AD83C8AD7" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-137E096D-51A6-4909-A4B9-DB6AD83C8AD7"><h2 class="- topic/title title sectiontitle">Testing</h2><p class="- topic/p p">Connect the <span class="- topic/ph ph">WBZ351</span> Curiosity board to PC, program the precompiled hex
                file or application example as mentioned. Upon flashing, there will not be any
                indication on the board, since the device enters deep sleep mode. User can press the
                USR-BTN 2(SW2) available on the board to start Deep sleep Advertising. To connect to
                the <span class="- topic/ph ph">WBZ351</span>, User can open the Microchip Bluetoth Data App
                on Smartphone. Select the BLE Smart sub app to see the scan results. Device name
                "BLE_DSADV" will appear.</p><div class="- topic/p p">
                <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_ZNG_VFS_QWB" src="GUID-96C33CFB-744E-4AE5-8D20-539286A4D753-high.svg"/></div>
            </div></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-48F0CD47-35F7-4174-9EB7-2F5D4C925553" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-48F0CD47-35F7-4174-9EB7-2F5D4C925553"><h2 class="- topic/title title sectiontitle">Current Consumption Measurement</h2><p class="- topic/p p">Connect the Multimeter/Power Debugger to Power Measurement Header J6. Power on the Board. If using Power Debugger, users can use Data Visualizer to measure the current consumption.</p><p class="- topic/p p">Current measured in <strong class="+ topic/ph hi-d/b ph b">Deep sleep</strong> mode is around 1.9 uA.</p><div class="- topic/p p">
                <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_M3D_DNS_QWB" src="GUID-2C0F202E-B277-4F76-B968-CB48C8051C0A-high.svg"/></div>
            </div><p class="- topic/p p">Current measured in <strong class="+ topic/ph hi-d/b ph b">Deep sleep + Advertising</strong> mode is around 130 uA average.</p><div class="- topic/p p">
                <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_WJL_2NS_QWB" src="GUID-3A27F495-44E2-4906-A5EA-D2E3EE2DDE13-high.svg"/></div>
            </div><p class="- topic/p p">Users of this Early adopter package should go through the known issues document and understand the limitations if any with the current low power mode implementation.</p></section>
        <section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_X4W_BGZ_QWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_X4W_BGZ_QWB"><h2 class="- topic/title title sectiontitle"><strong class="+ topic/ph hi-d/b ph b">Developing the application from scratch</strong></h2>In this section we will
            see two possible ways to develop this application. In the first section user can make
            use of the import method available in the MPLABX Code Configurator. This is the easist
            and quick way to recreate the application with the help of import component
            configuration. In the second section, the user can experience the complete application
            development from the scratch using the MPLABX Code Configurator. <ol class="- topic/ol ol" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__OL_SHN_FHZ_QWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__OL_SHN_FHZ_QWB">
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-38B5D1DC-09C9-4888-B286-389A64312EBF" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-38B5D1DC-09C9-4888-B286-389A64312EBF"><a class="- topic/xref xref" href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-543B0197-6024-46E8-8528-15DB3C839C5C">Developing
                        this Application using MPLAB Code Configurator Import method</a></li>
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-C396013A-FDD4-4A21-AB0C-5F50F6C14557" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-C396013A-FDD4-4A21-AB0C-5F50F6C14557"><a class="- topic/xref xref" href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_ONY_5FZ_QWB">Developing this Application from
                        scratch using MPLAB Code Configurator</a></li>
            </ol></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-49D50497-1913-485A-9D9B-F744A1C9AC9C" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-49D50497-1913-485A-9D9B-F744A1C9AC9C"><h2 class="- topic/title title sectiontitle">Developing this Application using
                MPLAB Code Configurator Import method</h2><p class="- topic/p p">This section explains the steps
                required by a user to develop this application example using MPLABx Code
                Configurator import method.</p><strong class="+ topic/ph hi-d/b ph b">Tip:</strong> New users of MPLAB Code Configurator are
            recommended to go through the <a class="- topic/xref xref" href="https://onlinedocs.microchip.com/pr/GUID-1F7007B8-9A46-4D03-AEED-650357BA760D-en-US-6/index.html?GUID-B5D058F5-1D0B-4720-8649-ACE5C0EEE2C0" target="_blank" rel="external noopener">overview</a><div class="- topic/p p">
                <ol class="- topic/ol ol" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-813E21EC-C440-4BF4-9129-D1E7F977859F" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-813E21EC-C440-4BF4-9129-D1E7F977859F">
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3F0533A3-5200-445C-8D92-89F730507BFA" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3F0533A3-5200-445C-8D92-89F730507BFA">
                        <p class="- topic/p p">Create a new MCC Harmony Project -- Refer to the New MCC project Creation
                            Topic.</p>
                    </li>
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6FE7EE72-BC39-48D1-A4D1-0404D6CA9A2A" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6FE7EE72-BC39-48D1-A4D1-0404D6CA9A2A">
                        <p class="- topic/p p">Import component configuration --This step helps users setup the basic
                            components and configuration required to develop this application. Users
                            should follow the instructions mentioned <a class="- topic/xref xref" href="GUID-F8FE2886-8A2C-4FC0-9956-C094CE44D162.html">here</a> to
                            import the component configuration.</p>
                        <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Tip:</strong> Import and Export functionality of component configuration
                            will help users to start from a known working setup of configuration</p>
                    </li>
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-264372A8-447A-44ED-9A57-8993B38DF10B" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-264372A8-447A-44ED-9A57-8993B38DF10B">
                        <p class="- topic/p p">Accept Dependencies or satisfiers, select "Yes".</p>
                    </li>
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-B5F57CD6-89DE-4D44-B0B3-A65BE753685C" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-B5F57CD6-89DE-4D44-B0B3-A65BE753685C">Verify if the Project Graph
                        window has all the expected configuration.<div class="- topic/p p">
                            <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_IYC_1XK_QWB" src="GUID-755B79B7-165D-4DF4-B2CD-EE8E29F7D2A6-high.svg"/></div>
                        </div><p class="- topic/p p"></p></li>
                </ol>
            </div></section>
        <section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_ONY_5FZ_QWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_ONY_5FZ_QWB"><h2 class="- topic/title title sectiontitle">Developing this Application from scratch using MPLAB Code
                Configurator</h2><p class="- topic/p p">This section intented to showcase the complete application
                development from the scratch including the individual component and its dependency
                inclusion.</p>
            <strong class="+ topic/ph hi-d/b ph b">Tip</strong> New users of MPLAB Code Configurator are recommended to go through the <a class="- topic/xref xref" href="https://onlinedocs.microchip.com/pr/GUID-1F7007B8-9A46-4D03-AEED-650357BA760D-en-US-6/index.html?GUID-B5D058F5-1D0B-4720-8649-ACE5C0EEE2C0" target="_blank" rel="external noopener">overview</a><ol class="- topic/ol ol" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__OL_Z5T_CPZ_QWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__OL_Z5T_CPZ_QWB">
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-81192F31-85F9-43DB-919B-040B31C5628D" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-81192F31-85F9-43DB-919B-040B31C5628D">
                    <p class="- topic/p p">Create a new MCC Harmony Project -- Refer to new MCC Project Creation</p>
                </li>
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-E6928FD0-97B1-4E01-AC8D-06C9E657E815" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-E6928FD0-97B1-4E01-AC8D-06C9E657E815">In the previous step, the BLE
                    Stack component is included. Accept all the component auto-activation and
                    attachment auto-connect confirmation. <div class="- topic/p p">
                        <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_RDY_RVZ_QWB" src="GUID-4D9498C5-2182-4902-BEA9-2CE543D01C88-high.svg"/></div>
                    </div>
                </li>
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-7E4C8E56-FC77-4F08-966B-CFAC0BD4DBF4" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-7E4C8E56-FC77-4F08-966B-CFAC0BD4DBF4">Include the RCON Component from
                    the peripheral category. <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_WK1_45Z_QWB" src="GUID-4FF96412-0CE5-40F6-8DAE-3EEA95AF4DB7-high.svg"/></div>
                </li>
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-48882A78-C200-47B3-987E-4E607E89682D" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-48882A78-C200-47B3-987E-4E607E89682D">
                    <p class="- topic/p p">Include the Transparent Service and Transparent Profile component located at
                        :Harmony-&gt; Wireless-&gt;Drivers-&gt;BLE</p>
                    <p class="- topic/p p">Establish the link between the Transparent Service and Profile</p>
                    <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_V4L_KYZ_QWB" src="GUID-3DD1FE0A-D555-49A6-802D-B7FB5BCABABB-high.svg"/></div>
                    <p class="- topic/p p">Click on the "Transparent Profile" component. In the configuration option,
                        enable server role</p>
                    <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_RK1_WY4_RWB" src="GUID-FA335714-2003-4FD8-B5EE-358190049C25-high.svg"/></div>
                </li>
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-CBD85F1C-EE34-4C87-9B80-2B73327B26DE" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-CBD85F1C-EE34-4C87-9B80-2B73327B26DE">
                    <p class="- topic/p p">Click on the BLE Stack component present in the project graph. A
                        configuration option window will get open. </p>
                    <div class="- topic/p p">Enable the check box for "Enable Sleep Mode" option. <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_J5Z_H11_RWB" src="GUID-1ACE7C6F-AD04-47BA-9D84-C182D663B4CF-high.svg"/></div></div>
                    <p class="- topic/p p">This action will trigger the auto inclusion of the RTC component . Accept the
                        confirmation and auto-connect request. </p>
                    <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_MKQ_BB1_RWB" src="GUID-9927B0F7-4857-4CC8-9853-47EBE0F27C3A-high.svg"/></div>
                </li>
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-31EF3B76-E79B-4FDE-8E12-F9F8A0F345F4" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-31EF3B76-E79B-4FDE-8E12-F9F8A0F345F4">
                    <div class="- topic/p p">Final Project graph with all the required component <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_QLG_5RB_RWB" src="GUID-3BA5D49A-FF08-4A97-9067-602EDE6B1F9A-high.svg"/></div></div>
                </li>
            </ol></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-A4C19FCA-2304-42E3-A5A6-5C550A9F715E" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-A4C19FCA-2304-42E3-A5A6-5C550A9F715E"><h2 class="- topic/title title sectiontitle">Component configuration
                settings</h2>
            
            <div class="- topic/p p">This section details about the configurational changes needed for each component in
                accordance with the application use case implementation. <ol class="- topic/ol ol" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3651E909-11A4-4C2C-9486-97BC0592275A" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3651E909-11A4-4C2C-9486-97BC0592275A">
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6DE73596-DA7E-4921-AF76-10200F1ACC9C" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6DE73596-DA7E-4921-AF76-10200F1ACC9C">Select <strong class="+ topic/ph hi-d/b ph b">BLE_Stack</strong>
                        component in project graph.<div class="- topic/p p">
                            <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_PPH_5JS_QWB" src="GUID-A304F532-45B3-466C-B922-812CF35A3CCD-high.svg"/></div>
                        </div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Note:</strong> Advertising Interval Min can be modified to adjust Deep
                            Sleep Advertising interval.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Tip:</strong> Advertisement payload can
                            be configured by user here.</p></li>
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-4AADFD0F-73D7-4AE0-A47E-31ED8827E68E" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-4AADFD0F-73D7-4AE0-A47E-31ED8827E68E">Select clock configuration.<div class="- topic/p p">
                            <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_S51_XVD_C5B" src="GUID-94CABEBF-0765-429A-BD41-9831F2CE23FF-high.png"/></div>
                        </div><p class="- topic/p p">Configure RTC clock configuration.</p><div class="- topic/p p">
                            <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_FKD_ZJS_QWB" src="GUID-C1BB0FA1-4436-4237-B692-E28F9F426022-high.svg"/></div>
                        </div><div class="- topic/note note notype note_notype" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__NOTE_D1X_FQS_QWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__NOTE_D1X_FQS_QWB"><span class="note__title">Note:</span> Even after enabling and selecting the SOSC
                            as backup source in the clock configuration. The LPCLK and RTC clock
                            still show as 0Hz. This is a known issue which will be resolved in
                            upcoming MCC release. For the time being, to fix this issue, a manual
                            application code modification is necessary. The required change will be
                            discussed in the next section. </div></li>
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-305D3B29-E07D-4DE1-83E1-7CFB7DCF6AD1" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-305D3B29-E07D-4DE1-83E1-7CFB7DCF6AD1">Configure LED GPIO Configuration.<div class="- topic/p p">
                            <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_WNS_Z4S_QWB" src="GUID-9B0BE9AC-7749-47C2-91D7-CF6754C4335A-high.svg"/></div>
                        </div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Note:</strong> The above GPIO configuration is used for indication of
                            the device state in this example and is optional.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Tip:</strong> The
                            configuration bits will be generated after user Generates code.</p></li>
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-1E836D91-14B1-4E23-B30E-F8968C1E51D8" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-1E836D91-14B1-4E23-B30E-F8968C1E51D8">
                        <p class="- topic/p p">RTOS Configuration</p>
                        <div class="- topic/p p">Increase the  Total heap size from the default value<div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_AMM_B5B_RWB" src="GUID-F5FE0F33-8810-44E3-A990-6707C561A4C8-high.svg"/></div></div>
                    </li>
                </ol></div>
        </section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-76B31218-70DA-4848-9E20-56E6BE9063C7" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-76B31218-70DA-4848-9E20-56E6BE9063C7"><h2 class="- topic/title title sectiontitle">Generate Code</h2>
            <p class="- topic/p p">Now all the required components has been added to the project and necessary
                configuration modification is made. The next step is to generate the application
                code. </p><p class="- topic/p p">To generate the project, follow the instruction on <a class="- topic/xref xref" href="GUID-9C28F407-4879-4174-9963-2CF34161398E.html">how to Generate Code</a></p><p class="- topic/p p">After generating the program source from MCC interface by clicking Generate Code, the BLE configuration can be found in the following project directories.</p><div class="- topic/p p"><div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_KYW_WT2_C5B" src="GUID-F8F3D8BD-13AE-423D-9A10-965276610B54-high.png"/></div></div><p class="- topic/p p">The <a class="- topic/xref xref" href="http://ww1.microchip.com/downloads/en/DeviceDoc/MPLAB%20Harmony%20OSAL%20Libraries%20Help%20v2.06.pdf" target="_blank" rel="external noopener">OSAL</a>, RF System, BLE System initialization routine executed during program initialization can be found in the project files. This initialization routine is automatically generated by the MCC.</p><div class="- topic/p p"><div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_VZV_152_C5B" src="GUID-C6E92089-B51F-4489-87AA-EC814F45BF9F-high.png"/></div></div><p class="- topic/p p">The BLE stack initialization routine excuted during Application Initialization can be found in project files. This intitialization routine is automatically generated by the MCC. This call initializes and configures the GAP, GATT, SMP, L2CAP and BLE middleware layers.</p><p class="- topic/p p">During system sleep, clock (system PLL) will be disabled and system tick will be turned off.
                FreeRTOS timer needs to be compensated for the time spent in sleep. RTC timer which
                works in the sleep mode is used to accomplish this. RTC timer will be initialized
                after BLE stack initialization.</p><div class="- topic/p p"><div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_JKB_C52_C5B" src="GUID-0E47FC35-2F24-4C1B-95EC-1E2DA4E7B67A-high.png"/></div></div><div class="- topic/p p"><div class="table-container"><table class="- topic/table table frame-all" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D" data-cols="2"><caption class="- topic/title title tablecap" data-caption-side="top" data-is-repeated="true"><span class="table--title-label"><span class="table--title-label">Table 5-2. </span></span><span class="table--title" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3AD24C80-4397-4D96-9ACA-5ACA2AE24D38"></span></caption><colgroup><col style="width:50%"/><col style="width:50%"/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-1 rowsep-1" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__1">Source Files</th><th class="- topic/entry entry colsep-0 rowsep-1" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__2">Usage</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-1 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__1">app.c</td><td class="- topic/entry entry colsep-0 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__2">Application State machine, includes calls for Initialization of all BLE stack (GAP,GATT, SMP, L2CAP) related component configurations</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-1 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__1">app_ble.c</td><td class="- topic/entry entry colsep-0 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__2">Source Code for the BLE stack related component configurations, code related to function calls from app.c</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-1 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__1">app_ble_handler.c</td><td class="- topic/entry entry colsep-0 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__2">All GAP, GATT, SMP and L2CAP Event handlers</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-1 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__1">app_ble_dsadv.c</td><td class="- topic/entry entry colsep-0 rowsep-1" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__2">Source Code for utilizing the deep sleep advertising functionality</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-1 rowsep-0" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__1">device_deep_sleep.c</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0D9332F9-65C8-4FFC-ACC5-DD0BC90D1A7D__entry__2">Source Code for deep Sleep and wake up related system configurations</td></tr></tbody></table></div></div></section><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Tip:</strong> app.c is autogenerated and has a state machine based Application code sample, users can use this template to develop their application. </p><p class="- topic/p p"></p><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-E7CB9B27-75A9-4A03-B60C-658DE8722A06" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-E7CB9B27-75A9-4A03-B60C-658DE8722A06"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Header Files</strong></p><ul class="- topic/ul ul"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-C46D1A9F-8D63-485C-95E8-1E44796A1B9D" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-C46D1A9F-8D63-485C-95E8-1E44796A1B9D"><p class="- topic/p p">ble_gap.h- This header file contains BLE GAP functions and is automatically included in the app.c file</p></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Function Calls</strong></p>MCC generates and adds the following code to initialize the BLE Stack GAP, GATT, L2CAP and SMP in APP_BleStackInit() and Deep Sleep Advertising Functionality in APP_BleDsadvStart(flag) function<ul class="- topic/ul ul"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-8B597AE8-C842-4C1D-A6BD-A4A713177F0C" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-8B597AE8-C842-4C1D-A6BD-A4A713177F0C"><p class="- topic/p p">APP_BleStackInit() and APP_BleDsadvStart(flag) are the API's that will be called inside the Applications Initial State -- APP_STATE_INIT in app.c.</p></li></ul></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-AF8A2E92-D354-4BEA-B4D7-2DE10A0FE36D" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-AF8A2E92-D354-4BEA-B4D7-2DE10A0FE36D"><h2 class="- topic/title title sectiontitle"> Manual Application code edit</h2><p class="- topic/p p">This section talks about the mandatory code modifications that needs to be incorporated inorder
                to implement the deep sleep Advertising functionality.</p>
            <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step 1: app_user_edits.c </strong></p>
            <ul class="- topic/ul ul" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_OKZ_TZB_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_OKZ_TZB_RWB">
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-AC89F01B-1E33-4E66-A286-5BDEC285D5DF" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-AC89F01B-1E33-4E66-A286-5BDEC285D5DF">Some of the Harmony 3 generated files cannot be fully configured by the MPLABX
                    Code Configurator. This file contains the instructions for the user to modify
                    these files.<p class="- topic/p p">Follow the instruction mentioned on the app_user_edits.c file and
                        after completing the required edits, comment out or remove the #error
                        line</p></li>
            </ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step 2 - Initialization.c</strong></p><ul class="- topic/ul ul" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_HCT_FHC_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_HCT_FHC_RWB">
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-9B02262A-8105-4EEE-8004-D852E1D86F4F" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-9B02262A-8105-4EEE-8004-D852E1D86F4F">Comment the code inside
                        <strong class="+ topic/ph hi-d/b ph b">SYS_Initialize</strong> function<p class="- topic/p p">In the MCC Generated code, the
                        CLK_Initialize and ROM functions are by default present inside
                        SYS_Initialize function  in Initialization.c file.  The user needs to
                        comment out the code referring to  CLK_Initialize and ROM functions  in
                        SYS_Initialize  function and should add under _on_reset() function in same
                        initialization.c file. </p>
                    <div class="- topic/p p">
                        <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_BKC_MFC_RWB" src="GUID-1DFEA086-DD28-4B22-8AF6-782057D35962-high.svg"/></div>
                    </div>
                    <p class="- topic/p p"></p></li>
            </ul>
            <ul class="- topic/ul ul">
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0BFF724E-32B8-4A0E-8585-69F18279ACBC" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-0BFF724E-32B8-4A0E-8585-69F18279ACBC">Code Inclusion inside <strong class="+ topic/ph hi-d/b ph b">_on_reset</strong> function<p class="- topic/p p">The previously commented code
                        inside SYS_Initilaze function is included here</p><div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_UKZ_L3C_RWB" src="GUID-1E8456DA-B06D-4061-A105-42912C1E0242-high.svg"/></div><pre class="+ topic/pre pr-d/codeblock pre codeblock" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__CODEBLOCK_FMP_VHC_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__CODEBLOCK_FMP_VHC_RWB"><code>CLK_Initialize(); 
    typedef int (*FUNC_PCHE_SETUP)(uint32_t);
    ((FUNC_PCHE_SETUP)(*(uint32_t*)0xF2D0))((PCHE_REGS-&gt;PCHE_CHECON &amp; (~(PCHE_CHECON_PFMWS_Msk | PCHE_CHECON_ADRWS_Msk | PCHE_CHECON_PREFEN_Msk)))
                                    | (PCHE_CHECON_PFMWS(2) | PCHE_CHECON_PREFEN(1)));																
    //Set RF as idle mode
    RF_SetIdleMode();</code></pre></li>
            </ul>
            <ul class="- topic/ul ul" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_QYC_4RC_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_QYC_4RC_RWB">
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-204CFADC-1DB9-4322-A3AD-278378557357" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-204CFADC-1DB9-4322-A3AD-278378557357">Code Inclusion inside <strong class="+ topic/ph hi-d/b ph b">SYS_Initialize</strong> function</li>
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-A47BF223-A547-4F87-97D5-20DE19359588" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-A47BF223-A547-4F87-97D5-20DE19359588">
                    <div class="- topic/p p">
                        <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__CODEBLOCK_BPQ_RRC_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__CODEBLOCK_BPQ_RRC_RWB"><code>DEVICE_DeepSleepWakeSrc_T wakeSrc;
DEVICE_GetDeepSleepWakeUpSrc(&amp;wakeSrc);
if (wakeSrc == DEVICE_DEEP_SLEEP_WAKE_NONE) //Initialize RTC if wake source is none(i.e power on reset)
{
 RTC_Initialize();
}</code></pre>
                    </div>
                </li>
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-71A9A418-350C-4384-A92A-B1F10A2EFB5F" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-71A9A418-350C-4384-A92A-B1F10A2EFB5F">
                    <div class="- topic/p p">
                        <div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_WVW_WRC_RWB" src="GUID-A30924D8-E8F6-4276-955F-8776BD86516E-high.svg"/></div>
                    </div>
                </li>
            </ul>
            <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step 3 - heap_4.c</strong></p>
            <div class="- topic/p p">Comment the below mentioned original code and replace it with Modified Code inside
                heap_4.c (available as part of FreeRTOS--&gt;MemMang<div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_RZM_SSC_RWB" src="GUID-B4B2B8FB-5509-41E8-8F7A-3A1FD63FB228-high.svg"/></div></div>
            <div class="- topic/p p">
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__CODEBLOCK_V35_DSC_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__CODEBLOCK_V35_DSC_RWB"><code>static uint8_t ucHeap[ configTOTAL_HEAP_SIZE ]; --&gt; Original Code 
 
static uint8_t  __attribute__((section (".bss.ucHeap"), noload)) ucHeap[ configTOTAL_HEAP_SIZE ]; --&gt;Modified Code</code></pre>
            </div>
            <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step 4 - Plib_rtc.h</strong></p>
            <div class="- topic/p p">
                <ul class="- topic/ul ul" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_X32_WTC_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_X32_WTC_RWB">
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3F44F544-BFC5-44B1-9076-8F9F473AF4F3" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3F44F544-BFC5-44B1-9076-8F9F473AF4F3">Default Generated: #define RTC_COUNTER_CLOCK_FREQUENCY (0U / (1UL &lt;&lt;
                        (0x1U - 1U)))</li>
                </ul>
            </div>
            <ul class="- topic/ul ul" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_F13_XTC_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_F13_XTC_RWB">
                <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-89601B04-3585-4F54-9687-DBAA66F752A5" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-89601B04-3585-4F54-9687-DBAA66F752A5">Replace to: #define RTC_COUNTER_CLOCK_FREQUENCY (32768U / (1UL &lt;&lt; (0x1U -
                    1U)))</li>
            </ul>
            <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Note: </strong>This particular change is made to componsate the known issue earlier
                discussed in clock configuration. This issue wil be resolved in the upcoming release
                and the MCC auto generated code will have the required change by default. </p>
            <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step 4 - Plib_clk.c</strong></p>
            <div class="- topic/p p">To enhance the CLK initialization period for the delay time of polling XTAL and PLL
                ready, below mentioned changes needs to be done. This requre manual code change as
                the current MCC couldn't capable of generating the required code. <ul class="- topic/ul ul" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_FS3_4L4_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__UL_FS3_4L4_RWB">
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-A57C3893-81EB-4FF1-BA5A-EFC5E55BF7A8" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-A57C3893-81EB-4FF1-BA5A-EFC5E55BF7A8">MCC Present Setting<div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_QYF_QL4_RWB" src="GUID-86DBD87B-47F1-4211-927E-2F64C90B5581-high.svg"/></div></li>
                    <li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-BA834D77-4827-4571-BC10-3445DB8D0820" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-BA834D77-4827-4571-BC10-3445DB8D0820">MCC New Settings<div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_WYT_RL4_RWB" src="GUID-9AEC3696-C9BB-4F0A-9D17-9FC23E934637-high.svg"/></div></li>
                </ul><pre class="+ topic/pre pr-d/codeblock pre codeblock" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__CODEBLOCK_YDF_55C_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__CODEBLOCK_YDF_55C_RWB"><code>//check CLDO ready
    while ((CFG_REGS-&gt;CFG_MISCSTAT &amp; CFG_MISCSTAT_CLDORDY_Msk) == 0);    
    
    //programming 4ms delay -  programming subsys_xtal_ready_delay  -&gt; Reduce to 2ms
    //check xtal spec for delay required
    BTZBSYS_REGS-&gt;BTZBSYS_SUBSYS_CNTRL_REG1 = ((BTZBSYS_REGS-&gt;BTZBSYS_SUBSYS_CNTRL_REG1 &amp; ~BTZBSYS_SUBSYS_CNTRL_REG1_subsys_xtal_ready_delay_Msk)
                                                | ((0x01) &lt;&lt; BTZBSYS_SUBSYS_CNTRL_REG1_subsys_xtal_ready_delay_Pos)); 
    //wait for crystal ready
    while((BTZBSYS_REGS-&gt;BTZBSYS_SUBSYS_STATUS_REG1 &amp; BTZBSYS_SUBSYS_STATUS_REG1_xtal_ready_out_Msk) != BTZBSYS_SUBSYS_STATUS_REG1_xtal_ready_out_Msk);

    // set PLL_enable
    BLE_REGS-&gt;BLE_DPLL_RG2 &amp;= ~(0x02);

    //programming delay for pll lock - 500 us -&gt; Reduce to 64us
    //32 us steps - check pll spec for final value 
    BTZBSYS_REGS-&gt;BTZBSYS_SUBSYS_CNTRL_REG3 = ((BTZBSYS_REGS-&gt;BTZBSYS_SUBSYS_CNTRL_REG3 &amp; ~BTZBSYS_SUBSYS_CNTRL_REG3_subsys_pll_ready_delay_Msk )
                                                   | ((0x02) &lt;&lt; BTZBSYS_SUBSYS_CNTRL_REG3_subsys_pll_ready_delay_Pos));</code></pre></div>
            <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step 5 - WBZ351.ld</strong></p>
            <p class="- topic/p p">Additional linker file related changes needs to be incorporated to define the backup
                RAM address. This configuration will be later make available into the MCC
                configuration. Until then this manual edit is required. </p>
            <div class="- topic/p p">The highlighed code in the below image needs to be incorporated to the MCC generated
                WBZ351.ld file<div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_AJF_QS4_RWB" src="GUID-FF205F91-7ACF-4FC9-B7D2-A6BB9E44861D-high.svg"/></div></div></section><section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-5F491E2B-E79E-4CA1-B300-B395F2957CD2" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-5F491E2B-E79E-4CA1-B300-B395F2957CD2"><h2 class="- topic/title title sectiontitle">User Application Development</h2><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Include</strong></p><div class="- topic/p p"><ul class="- topic/ul ul"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3D45720F-8DD9-4AF9-A365-163B482E06E2" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-3D45720F-8DD9-4AF9-A365-163B482E06E2">definitions.h in all the files where port pin macros are used.<p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Tip:</strong> definitions.h is not specific to just port peripheral, instead it should be included in all application source files where peripheral functionality will be exercised.</p></li></ul></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Enter Deep Sleep mode</strong></p><ul class="- topic/ul ul"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6E21895C-31E9-4AA4-989A-D6D8D8F93210" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6E21895C-31E9-4AA4-989A-D6D8D8F93210"><p class="- topic/p p">DEVICE_EnterDeepSleep(false,0);</p><p class="- topic/p p">This API can be called to put the device to deep sleep mode.</p></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Start Deep Sleep Advertisement</strong></p><ul class="- topic/ul ul"><li class="- topic/li li" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-87B9BFC8-3A75-4445-82D7-4AA735222D25" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-87B9BFC8-3A75-4445-82D7-4AA735222D25">APP_BleDsadvStart(false);<p class="- topic/p p">This API can be
                        called to start the Deep sleep Advertising.</p><p class="- topic/p p">This API is called in the
                        Applications initialstate - APP_STATE_INIT in app.c</p><p class="- topic/p p">Users can exercise
                        various other BLE Advertisement functionalities by using <a class="- topic/xref xref" href="https://onlinedocs.microchip.com/pr/GUID-C5EAF60E-9124-427C-A0F1-F2DBE662EA92-en-US-1/index.html" target="_blank" rel="external noopener">BLE Stack API</a>.</p></li></ul></section>
        <section class="- topic/section section" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_VM3_XP4_RWB" data-ofbid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_VM3_XP4_RWB"><h2 class="- topic/title title sectiontitle">Application use case implemention</h2>
            
            <p class="- topic/p p">The application implementation is purely user choice. This deep sleep advertisement
                application is designed in such a way that, the device enter into deep sleep upon
                power up and when the USR BTN 2 is pressed, the device starts deep sleep
                advertisement based on the fixed advertisement interval. Device wakes up from deep
                sleep in regular interval to do a advertisement and go back to sleep again. </p>
            <div class="- topic/p p">This scenario is implemented by modifing default generated code inside the switch
                case in <strong class="+ topic/ph hi-d/b ph b">app.c</strong>. User can implement desired application work flow by making use
                of availabe function calls.<div class=""><img class="- topic/image image break break" id="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__IMAGE_R5F_KR4_RWB" src="GUID-E943E78F-318E-4647-8DED-DE8CB63DAEA5-high.svg"/></div></div>
        </section></div><article class="- topic/topic topic nested1" aria-labelledby="TOPIC_V5L_VXP_35B__GUID-3C9874E0-EF12-49BB-863B-8BA89D3F636F" id="TOPIC_V5L_VXP_35B"><h2 class="- topic/title title topictitle2" id="TOPIC_V5L_VXP_35B__GUID-3C9874E0-EF12-49BB-863B-8BA89D3F636F" style=""> Known Issue:</h2><div class="- topic/body body"><p class="- topic/p p">System sleep Implementation source(device_sleep.c) and header(device_sleep.h) files may not include sometimes when regenerated the project through MCC.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Note:</strong> It is recommended to follow the below steps to avoid the mentioned known issue whenever deep sleep project is opened through MCC.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step1:</strong> Please uncheck and re-enable the <strong class="+ topic/ph hi-d/b ph b">Enable Sleep Mode</strong> and <strong class="+ topic/ph hi-d/b ph b">Enable Deep Sleep Advertising</strong> option inside BLE stack Component Configuration Options as shown in the figure below and accept the dependencies requested.</p><div class="- topic/p p"><div class=""><img class="- topic/image image break break" id="TOPIC_V5L_VXP_35B__IMAGE_H5D_YZP_35B" src="GUID-5D00C338-5E5D-4AD9-8C66-C787111201D5-high.png"/></div></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step2:</strong> Enable force update option and press Generate.</p><div class="- topic/p p"><div class=""><img class="- topic/image image break break" id="TOPIC_V5L_VXP_35B__IMAGE_RBP_X1Q_35B" src="GUID-564A573A-A4C5-4FFC-92D4-A5261D5490C8-high.png"/></div></div><p class="- topic/p p"></p><section class="- topic/section section" id="TOPIC_V5L_VXP_35B__GUID-8FC495BA-2541-49CD-B7EE-627DF0EFA7DA" data-ofbid="TOPIC_V5L_VXP_35B__GUID-8FC495BA-2541-49CD-B7EE-627DF0EFA7DA"><h3 class="- topic/title title sectiontitle">Where to go from here</h3><ul class="- topic/ul ul" id="TOPIC_V5L_VXP_35B__UL_BMS_CBQ_35B" data-ofbid="TOPIC_V5L_VXP_35B__UL_BMS_CBQ_35B"><li class="- topic/li li" id="TOPIC_V5L_VXP_35B__GUID-690A7369-A200-4256-A619-EF22E39E02A7" data-ofbid="TOPIC_V5L_VXP_35B__GUID-690A7369-A200-4256-A619-EF22E39E02A7"><p class="- topic/p p"> <a class="- topic/xref xref" href="GUID-F9A0C390-C124-49A7-9F22-157D20BFBE5D.html">BLE Connection</a></p></li></ul></section></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">On this page</div><ul><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-E5A5126A-BEC8-4541-9415-F6005C391E89" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-E5A5126A-BEC8-4541-9415-F6005C391E89">Introduction</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F90C9AF2-9298-4F77-908D-493BCF52E866" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-F90C9AF2-9298-4F77-908D-493BCF52E866">Recommended Reads</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-7EA51B0D-8E4A-4555-BD4B-0D1B90A07BB1" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-7EA51B0D-8E4A-4555-BD4B-0D1B90A07BB1">Hardware Required</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-21D0FA9A-083B-41A6-8D3F-BE24E852031A" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-21D0FA9A-083B-41A6-8D3F-BE24E852031A">SDK Setup</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-C2836D07-01B1-49EF-AAC2-CE48326BC119" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-C2836D07-01B1-49EF-AAC2-CE48326BC119">Software</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6BE272DC-6424-4165-B344-CBF5ECDA37D7" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-6BE272DC-6424-4165-B344-CBF5ECDA37D7">Smartphone App</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-223374A9-C495-4FB3-B331-1874CE132816" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-223374A9-C495-4FB3-B331-1874CE132816">Programming the precompiled hex file or Application Example</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-7AEB4551-8490-4AF3-AAD0-B605BC8A1DD8" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-7AEB4551-8490-4AF3-AAD0-B605BC8A1DD8">Demo Description</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-137E096D-51A6-4909-A4B9-DB6AD83C8AD7" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-137E096D-51A6-4909-A4B9-DB6AD83C8AD7">Testing</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-48F0CD47-35F7-4174-9EB7-2F5D4C925553" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-48F0CD47-35F7-4174-9EB7-2F5D4C925553">Current Consumption Measurement</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_X4W_BGZ_QWB" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_X4W_BGZ_QWB"><strong class="+ topic/ph hi-d/b ph b">Developing the application from scratch</strong></a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-49D50497-1913-485A-9D9B-F744A1C9AC9C" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-49D50497-1913-485A-9D9B-F744A1C9AC9C">Developing this Application using
                MPLAB Code Configurator Import method</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_ONY_5FZ_QWB" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_ONY_5FZ_QWB">Developing this Application from scratch using MPLAB Code
                Configurator</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-A4C19FCA-2304-42E3-A5A6-5C550A9F715E" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-A4C19FCA-2304-42E3-A5A6-5C550A9F715E">Component configuration
                settings</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-76B31218-70DA-4848-9E20-56E6BE9063C7" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-76B31218-70DA-4848-9E20-56E6BE9063C7">Generate Code</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-AF8A2E92-D354-4BEA-B4D7-2DE10A0FE36D" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-AF8A2E92-D354-4BEA-B4D7-2DE10A0FE36D"> Manual Application code edit</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-5F491E2B-E79E-4CA1-B300-B395F2957CD2" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__GUID-5F491E2B-E79E-4CA1-B300-B395F2957CD2">User Application Development</a></div></li><li class="section-item"><div class="section-title"><a href="#GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_VM3_XP4_RWB" data-tocid="GUID-D48B1FA5-5DFB-4C33-8875-5F55D83F4B0D__SECTION_VM3_XP4_RWB">Application use case implemention</a></div></li><li class="topic-item"><a href="#TOPIC_V5L_VXP_35B" data-tocid="TOPIC_V5L_VXP_35B"> Known Issue:</a><ul><li class="section-item"><div class="section-title"><a href="#TOPIC_V5L_VXP_35B__GUID-8FC495BA-2541-49CD-B7EE-627DF0EFA7DA" data-tocid="TOPIC_V5L_VXP_35B__GUID-8FC495BA-2541-49CD-B7EE-627DF0EFA7DA">Where to go from here</a></div></li></ul></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <div class="mchp_disclaimer"><p class="mchp_disclaimer_text">The online versions of the documents are provided as a courtesy. Verify all content and data in the device’s PDF documentation found on the device product page.</p></div><footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
    <div class="footer">
  <div class="mchp-wh-footer">
    <div class="mchp-footer">
      <div class="mchp-footer-tier1">
        <div class="spacer"></div>
        <div class="mchp-footer-container">
          <div class="mchp-footer-links mchp-social-media-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.facebook.com/pages/Microchip-Technology-Inc/20320981741" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Facebook" src="oxygen-webhelp/template/resources/images/201016-corp-facebook.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.linkedin.com/company/microchip-technology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip LinkedIn" src="oxygen-webhelp/template/resources/images/201016-corp-linkedin.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://twitter.com/MicrochipTech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Twitter" src="oxygen-webhelp/template/resources/images/201016-corp-twitter.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.youtube.com/user/MicrochipTechnology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip YouTube" src="oxygen-webhelp/template/resources/images/201016-corp-youtube.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.instagram.com/microchiptechnologyinc/" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Instagram" src="oxygen-webhelp/template/resources/images/201016-corp-instagram.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.weibo.com/microchiptech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Weibo" src="oxygen-webhelp/template/resources/images/201016-corp-weibo.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.microchip.com/en-us/about/blog" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Blog" src="oxygen-webhelp/template/resources/images/201016-corp-blog.png"/>
                </a>
              </div>
            </div>
          </div>
          <div class="mchp-footer-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://www.microchip.com/about-us/contact-us" class="mchp-link__link">Contact</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information" class="mchp-link__link">Legal</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/privacy-policy" class="mchp-link__link">Privacy Policy</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/microchip-cookie-statement" class="mchp-link__link">Cookies</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://careers.microchip.com/" class="mchp-link__link">Careers</a>
                  <span class="mchp-link__separator"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="mchp-footer-newsletter">
            <div class="cmp-text">
              <p>Stay on the leading edge with our blog</p>
            </div>
            <div class="mchp-button-wrapper">
              <a role="button" href="https://www.microchip.com/en-us/about/blog" class="mchp-button mchp-button-regular solid">
                <span class="mchp-button__span">MicroSolutions</span>
              </a>
            </div>
          </div>
        </div>
        <div class="graphic">
          <img src="oxygen-webhelp/template/resources/images/footer-graphic.png"/>
        </div>
      </div>
      <div class="mchp-footer-tier2">
        <p class="mchp-copyright">© Copyright 1998-2022 Microchip Technology Inc. All rights reserved.</p>
      </div>
    </div>
  </div>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-19"></script>
  <script>
    window.dataLayer = window.dataLayer || [];  
    function gtag(){dataLayer.push(arguments);}  
    gtag('js', new Date());   
    gtag('config', 'UA-2724382-19');
  </script>
</div>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
        
        <script type="text/javascript">_satellite.pageBottom();</script><!-- Adobe Analytics -->
        </body>
</html>